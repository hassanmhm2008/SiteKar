<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØªØ³Øª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§</title>
    <style>
        body { font-family: Tahoma; padding: 20px; }
        button { padding: 10px 20px; margin: 10px; font-size: 16px; cursor: pointer; }
        .success { background: #4CAF50; color: white; }
        .danger { background: #f44336; color: white; }
        .info { background: #2196F3; color: white; }
        #output { margin-top: 20px; padding: 10px; background: #f0f0f0; min-height: 100px; }
    </style>
</head>
<body>
    <h1>ØªØ³Øª Ø³Ø±ÛŒØ¹ ØªÙˆØ§Ø¨Ø¹ JavaScript</h1>
    
    <div>
        <button class="info" onclick="testViewDetails()">ØªØ³Øª Ù†Ù…Ø§ÛŒØ´ (ğŸ‘ï¸)</button>
        <button class="success" onclick="testApprove()">ØªØ³Øª ØªØ§ÛŒÛŒØ¯ (âœ“)</button>
        <button class="danger" onclick="testReject()">ØªØ³Øª Ø±Ø¯ (âœ—)</button>
    </div>

    <div id="output"></div>

    <script>
        const output = document.getElementById('output');

        function log(message) {
            output.innerHTML += message + '<br>';
            console.log(message);
        }

        function testViewDetails() {
            log('âœ“ ØªØ§Ø¨Ø¹ viewDetails ØµØ¯Ø§ Ø²Ø¯Ù‡ Ø´Ø¯');
            log('Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø² Ø³Ø±ÙˆØ±...');
            
            fetch('http://localhost:3000/api/requests/1')
                .then(res => res.json())
                .then(data => {
                    log('âœ“ Ø¯Ø§Ø¯Ù‡ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯: ' + JSON.stringify(data).substring(0, 50) + '...');
                })
                .catch(err => {
                    log('âœ— Ø®Ø·Ø§: ' + err.message);
                });
        }

        function testApprove() {
            log('âœ“ ØªØ§Ø¨Ø¹ openApproveModal ØµØ¯Ø§ Ø²Ø¯Ù‡ Ø´Ø¯');
            log('âœ“ Modal ØªØ§ÛŒÛŒØ¯ Ø¨Ø§ÛŒØ¯ Ø¨Ø§Ø² Ø´ÙˆØ¯');
            alert('Ø§Ú¯Ø± Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ø±Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒØ¯ØŒ Ø¯Ú©Ù…Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯!');
        }

        function testReject() {
            log('âœ“ ØªØ§Ø¨Ø¹ openRejectModal ØµØ¯Ø§ Ø²Ø¯Ù‡ Ø´Ø¯');
            log('âœ“ Modal Ø±Ø¯ Ø¨Ø§ÛŒØ¯ Ø¨Ø§Ø² Ø´ÙˆØ¯');
            alert('Ø§Ú¯Ø± Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ø±Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒØ¯ØŒ Ø¯Ú©Ù…Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯!');
        }

        // ØªØ³Øª Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø¯Ø± Ù‡Ù†Ú¯Ø§Ù… Ù„ÙˆØ¯
        window.addEventListener('load', () => {
            log('=== ØµÙØ­Ù‡ Ù„ÙˆØ¯ Ø´Ø¯ ===');
            log('ØªØ§Ø±ÛŒØ®/Ø²Ù…Ø§Ù†: ' + new Date().toLocaleString('fa-IR'));
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±
            fetch('http://localhost:3000/api/requests/all/pending')
                .then(res => {
                    log('âœ“ Ø³Ø±ÙˆØ± Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø§Ø³Øª');
                    return res.json();
                })
                .then(data => {
                    log('âœ“ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§: ' + (data.requests ? data.requests.length : 0));
                })
                .catch(err => {
                    log('âœ— Ø³Ø±ÙˆØ± Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª: ' + err.message);
                    log('âš ï¸ Ù„Ø·ÙØ§Ù‹ Ø³Ø±ÙˆØ± Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯: cd backend && node server.js');
                });
        });
    </script>
</body>
</html>
